# ==============================================================================
# ConvertX-CN Full æ“´å……ç‰ˆ Dockerfile
# ç‰ˆæœ¬ï¼šv0.1.15
# ==============================================================================
#
# ğŸ“¦ Image èªªæ˜ï¼š
#   - åŸºæ–¼ ConvertX-CN å®˜æ–¹ Imageï¼ˆä¸€èˆ¬ç‰ˆï¼‰é€²è¡Œæ“´å……
#   - é©åˆéœ€è¦æ›´å¤šèªè¨€ OCR æˆ–å®Œæ•´ TexLive çš„é€²éšä½¿ç”¨è€…
#   - âš ï¸ é«”ç©è¼ƒå¤§ï¼ˆå¯èƒ½è¶…é 10GBï¼‰
#
# ğŸ¯ é©ç”¨å ´æ™¯ï¼š
#   - éœ€è¦ 65 ç¨® OCR èªè¨€å…¨æ”¯æ´
#   - éœ€è¦å®Œæ•´ TexLiveï¼ˆç‰¹æ®Š LaTeX å¥—ä»¶ï¼‰
#   - å¤šèªè¨€ä¼æ¥­ç’°å¢ƒ
#
# ğŸ“¦ ä½¿ç”¨æ–¹å¼ï¼š
#   1. ç¢ºä¿å·²æœ‰ convertx/convertx-cn:latest æˆ–è‡ªè¡Œ build
#   2. å–æ¶ˆè¨»è§£éœ€è¦çš„åŠŸèƒ½å€å¡Š
#   3. åŸ·è¡Œï¼šdocker build -f Dockerfile.full -t convertx-cn-full .
#
# âš ï¸ é¢¨éšªæç¤ºï¼š
#   - æ¯å€‹æ“´å……åŠŸèƒ½éƒ½æœƒå¢åŠ  Image å¤§å°
#   - å…¨éƒ¨å•Ÿç”¨å¯èƒ½ä½¿ Image è¶…é 15GB
#   - è«‹ä¾å¯¦éš›éœ€æ±‚é¸æ“‡æ€§å•Ÿç”¨
#
# ==============================================================================

# åŸºæ–¼ ConvertX-CN å®˜æ–¹ Imageï¼ˆä¸€èˆ¬ç‰ˆï¼‰
FROM convertx/convertx-cn:latest

# ==============================================================================
# ğŸ“š å®Œæ•´ TexLiveï¼ˆç´„ +3GBï¼‰
# ==============================================================================
# èªªæ˜ï¼šå®Œæ•´ LaTeX æ”¯æ´ï¼Œé©åˆéœ€è¦ç‰¹æ®Š LaTeX å¥—ä»¶çš„ä½¿ç”¨è€…
# é¢¨éšªï¼šImage é«”ç©å¤§å¹…å¢åŠ 
# â„¹ï¸ ä¸€èˆ¬ç‰ˆå·²å…§å»ºï¼štexlive-base, texlive-latex-base, texlive-xetex, texlive-lang-cjk
# ------------------------------------------------------------------------------
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   texlive-full \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# ==============================================================================
# ğŸ”¤ OCR èªè¨€æ“´å……ï¼ˆæŒ‰åœ°å€åˆ†é¡ï¼‰
# ==============================================================================
#
# ğŸ“Š é ä¼°å¤§å°ï¼š
#   - æ¯å€‹èªè¨€åŒ…ï¼š5-50MB
#   - å…¨éƒ¨èªè¨€ï¼šç´„ +2GB
#
# ğŸ’¡ å»ºè­°ï¼šåƒ…å®‰è£å¯¦éš›éœ€è¦çš„èªè¨€
# â„¹ï¸ ä¸€èˆ¬ç‰ˆå·²å…§å»ºï¼šeng, chi-tra, chi-sim, jpn, kor, deu, fra
# ------------------------------------------------------------------------------

# --- æ­æ´²èªè¨€ï¼ˆè¥¿æ­ï¼‰---
# ç´„ +150MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-spa \
#   tesseract-ocr-ita \
#   tesseract-ocr-por \
#   tesseract-ocr-nld \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- æ­æ´²èªè¨€ï¼ˆåŒ—æ­ï¼‰---
# ç´„ +100MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-swe \
#   tesseract-ocr-dan \
#   tesseract-ocr-nor \
#   tesseract-ocr-fin \
#   tesseract-ocr-isl \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- æ­æ´²èªè¨€ï¼ˆæ±æ­/æ–¯æ‹‰å¤«ï¼‰---
# ç´„ +200MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-pol \
#   tesseract-ocr-rus \
#   tesseract-ocr-ukr \
#   tesseract-ocr-ces \
#   tesseract-ocr-slk \
#   tesseract-ocr-hun \
#   tesseract-ocr-ron \
#   tesseract-ocr-bul \
#   tesseract-ocr-hrv \
#   tesseract-ocr-srp \
#   tesseract-ocr-slv \
#   tesseract-ocr-lit \
#   tesseract-ocr-lav \
#   tesseract-ocr-est \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- æ­æ´²èªè¨€ï¼ˆå…¶ä»–ï¼‰---
# ç´„ +80MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-ell \
#   tesseract-ocr-tur \
#   tesseract-ocr-cat \
#   tesseract-ocr-eus \
#   tesseract-ocr-glg \
#   tesseract-ocr-gle \
#   tesseract-ocr-cym \
#   tesseract-ocr-mlt \
#   tesseract-ocr-mkd \
#   tesseract-ocr-sqi \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- ä¸­æ±èªè¨€ ---
# ç´„ +100MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-ara \
#   tesseract-ocr-heb \
#   tesseract-ocr-fas \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- å—äºèªè¨€ ---
# ç´„ +200MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-hin \
#   tesseract-ocr-ben \
#   tesseract-ocr-tam \
#   tesseract-ocr-tel \
#   tesseract-ocr-kan \
#   tesseract-ocr-mal \
#   tesseract-ocr-mar \
#   tesseract-ocr-guj \
#   tesseract-ocr-pan \
#   tesseract-ocr-sin \
#   tesseract-ocr-nep \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- æ±å—äºèªè¨€ ---
# ç´„ +100MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-tha \
#   tesseract-ocr-vie \
#   tesseract-ocr-ind \
#   tesseract-ocr-msa \
#   tesseract-ocr-fil \
#   tesseract-ocr-mya \
#   tesseract-ocr-khm \
#   tesseract-ocr-lao \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- éæ´²èªè¨€ ---
# ç´„ +50MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-afr \
#   tesseract-ocr-swa \
#   tesseract-ocr-amh \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# ------------------------------------------------------------------------------
# ğŸŒ ä¸€éµå®‰è£æ‰€æœ‰ OCR èªè¨€ï¼ˆç´„ +2GBï¼‰
# âš ï¸ è­¦å‘Šï¼šé€™æœƒé¡¯è‘—å¢åŠ  Image å¤§å°èˆ‡ build æ™‚é–“
# ------------------------------------------------------------------------------
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   tesseract-ocr-all \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# ==============================================================================
# ğŸ”¤ é¡å¤–å­—å‹å¥—ä»¶
# ==============================================================================

# --- Noto å®Œæ•´å­—å‹é›†ï¼ˆç´„ +500MBï¼‰---
# åŒ…å«å…¨çƒæ‰€æœ‰èªè¨€çš„ Noto å­—å‹
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   fonts-noto-extra \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- é˜¿æ‹‰ä¼¯èª/å¸Œä¼¯ä¾†èªå­—å‹ ---
# ç´„ +50MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   fonts-noto-ui-core \
#   fonts-arabeyes \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- å°åº¦èªç³»å­—å‹ ---
# ç´„ +100MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   fonts-indic \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- æ³°æ–‡å­—å‹ ---
# ç´„ +20MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   fonts-thai-tlwg \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# ==============================================================================
# ğŸ“š é¡å¤– TexLive èªè¨€åŒ…
# ==============================================================================

# --- æ›´å¤šæ­æ´²èªè¨€ LaTeX æ”¯æ´ ---
# ç´„ +300MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   texlive-lang-spanish \
#   texlive-lang-italian \
#   texlive-lang-portuguese \
#   texlive-lang-polish \
#   texlive-lang-cyrillic \
#   texlive-lang-greek \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# --- é˜¿æ‹‰ä¼¯èª/å¸Œä¼¯ä¾†èª LaTeX æ”¯æ´ ---
# ç´„ +150MB
# RUN apt-get update && apt-get install -y --no-install-recommends \
#   texlive-lang-arabic \
#   texlive-lang-other \
#   && apt-get clean && rm -rf /var/lib/apt/lists/*

# ==============================================================================
# ğŸ”§ é€²éšè½‰æ›å·¥å…·
# ==============================================================================
# â„¹ï¸ ä¸€èˆ¬ç‰ˆå·²å…§å»ºï¼šOpenCV, libavcodec-extra
# ä»¥ä¸‹å·¥å…·åœ¨ä¸€èˆ¬ç‰ˆä¸­å·²åŒ…å«ï¼Œç„¡éœ€é¡å¤–å®‰è£
# ------------------------------------------------------------------------------

# ==============================================================================
# ğŸŒ é¡å¤– Locale è¨­å®š
# ==============================================================================
# å¦‚éœ€æ›´å¤šèªè¨€çš„ locale æ”¯æ´ï¼Œå–æ¶ˆä»¥ä¸‹è¨»è§£
# â„¹ï¸ ä¸€èˆ¬ç‰ˆå·²å…§å»ºï¼šen_US, zh_TW, zh_CN, ja_JP, ko_KR, de_DE, fr_FR
# ------------------------------------------------------------------------------
# RUN sed -i 's/# es_ES.UTF-8 UTF-8/es_ES.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# it_IT.UTF-8 UTF-8/it_IT.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# pt_BR.UTF-8 UTF-8/pt_BR.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# ru_RU.UTF-8 UTF-8/ru_RU.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# ar_SA.UTF-8 UTF-8/ar_SA.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# th_TH.UTF-8 UTF-8/th_TH.UTF-8 UTF-8/' /etc/locale.gen && \
#   sed -i 's/# vi_VN.UTF-8 UTF-8/vi_VN.UTF-8 UTF-8/' /etc/locale.gen && \
#   locale-gen

# ==============================================================================
# ğŸ“‹ æ“´å……åŠŸèƒ½ç¸½è¦½
# ==============================================================================
#
# â„¹ï¸ ä¸€èˆ¬ç‰ˆå·²å…§å»ºåŠŸèƒ½ï¼š
#   - æ ¸å¿ƒè½‰æ›ï¼šLibreOffice, FFmpeg, ImageMagick, Pandoc, Inkscape
#   - OCRï¼šTesseractï¼ˆ7 ç¨®èªè¨€ï¼‰
#   - PDF ç¿»è­¯ï¼šPDFMathTranslate, BabelDOC
#   - PDF è½‰ MDï¼šMinerU
#   - å­—å‹ï¼šNoto CJK, Liberation, æ¨™æ¥·é«”
#   - TexLiveï¼šåŸºç¤ + CJK + å¾·æ³•
#   - OpenCV, libavcodec-extra
#
# | åŠŸèƒ½                    | é ä¼°å¤§å°  | é¢¨éšªç­‰ç´š |
# |-------------------------|----------|----------|
# | å®Œæ•´ TexLive            | +3GB     | é«˜       |
# | å…¨éƒ¨ OCR èªè¨€           | +2GB     | é«˜       |
# | æ­æ´² OCRï¼ˆè¥¿æ­ï¼‰        | +150MB   | ä½       |
# | æ­æ´² OCRï¼ˆåŒ—æ­ï¼‰        | +100MB   | ä½       |
# | æ­æ´² OCRï¼ˆæ±æ­ï¼‰        | +200MB   | ä¸­       |
# | ä¸­æ± OCR                | +100MB   | ä½       |
# | å—äº OCR                | +200MB   | ä¸­       |
# | æ±å—äº OCR              | +100MB   | ä½       |
# | éæ´² OCR                | +50MB    | ä½       |
# | Noto Extra å­—å‹         | +500MB   | ä¸­       |
# | å°åº¦èªç³»å­—å‹            | +100MB   | ä½       |
# | é¡å¤– TexLive èªè¨€       | +300MB   | ä¸­       |
# | OpenCV                  | +200MB   | ä¸­       |
#
# ==============================================================================
